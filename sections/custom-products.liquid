<!-- Slick CSS -->
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">

<!-- Slick JS -->
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>

<script>
  document.querySelectorAll('.ajax-add-to-cart').forEach(form => {
    form.addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent default form submission
      const formData = new FormData(form);

      fetch('/cart/add.js', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        console.log('Product added:', data);
        alert('Product added to cart!'); // Notify the user
      })
      .catch((error) => {
        console.error('Error:', error);
      });
    });
  });

  // Initialize Slick slider if there are more than 4 product cards
  document.addEventListener("DOMContentLoaded", function() {
    const productCards = document.querySelectorAll('.product-card');
    if (productCards.length > 4) {
      $('.grid').slick({
        slidesToShow: 4,  // Show 4 slides at a time
        slidesToScroll: 1,
        infinite: true,
        autoplay: true,
        autoplaySpeed: 3000,
        dots: true,
        arrows: true
      });
    }
  });
</script>

{% schema %}
{
  "name": "Custom Products Section",
  "settings": [
    {
      "type": "color",
      "id": "star_color",
      "label": "Star Color",
      "default": "#FFD700"
    },
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading Text",
      "default": "Welcome to Our Store"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#333333"
    },
    {
      "type": "range",
      "id": "heading_font_size",
      "label": "Heading Font Size (px)",
      "min": 16,
      "max": 48,
      "default": 24
    },
    {
      "type": "text",
      "id": "subheading_text",
      "label": "Subheading Text",
      "default": "Quality Products at Great Prices"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading Color",
      "default": "#777777"
    },
    {
      "type": "range",
      "id": "subheading_font_size",
      "label": "Subheading Font Size (px)",
      "min": 12,
      "max": 36,
      "default": 18
    },
    {
      "type": "range",
      "id": "number_of_products",
      "label": "Number of Product Cards",
      "min": 1,
      "max": 10,
      "default": 3
    },
    {
      "type": "range",
      "id": "gap_above",
      "label": "Gap Above Products (in pixels)",
      "min": 0,
      "max": 100,
      "default": 20
    },
    {
      "type": "range",
      "id": "gap_below",
      "label": "Gap Below Products (in pixels)",
      "min": 0,
      "max": 100,
      "default": 20
    }
  ],
  "blocks": [
    {
      "type": "product_card",
      "name": "Product Card",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        },
        {
          "type": "text",
          "id": "small_title",
          "label": "Small Title"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle"
        },
        {
          "type": "text",
          "id": "point_1",
          "label": "Point 1"
        },
        {
          "type": "text",
          "id": "point_2",
          "label": "Point 2"
        },
        {
          "type": "text",
          "id": "point_3",
          "label": "Point 3"
        },
        {
          "type": "text",
          "id": "point_4",
          "label": "Point 4"
        },
        {
          "type": "text",
          "id": "point_5",
          "label": "Point 5"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Products",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div
  class="custom-products-wrapper"
>
  <div
    class="custom-products"
    style="margin-top: {{ section.settings.gap_above }}px; margin-bottom: {{ section.settings.gap_below }}px;"
  >
    <!-- <div class="stars" style="color: {{ section.settings.star_color }};">★★★★★</div> -->
    <h2
      class="custom-card-heading"
      style="color: {{ section.settings.heading_color }}; font-size: {{ section.settings.heading_font_size }}px"
    >
      {{ section.settings.heading_text }}
    </h2>

    <h3
      class="custom-subheading"
      style="color: {{ section.settings.subheading_color }}; font-size: {{ section.settings.subheading_font_size }}px"
    >
      {{ section.settings.subheading_text }}
    </h3>

    <div class="grid">
      {%- for block in section.blocks -%}
        {%- assign product = block.settings.product -%}
        <div class="product-card">
          <!-- Wrap product image and name with a link to the product page -->
          <a href="{{ product.url }}" class="product-link" style="text-decoration: none; color: inherit;">
            <img
              src="{{ product.featured_image | img_url: '240x240' }}"
              alt="{{ product.title }}"
              class="product-image"
            >
            <h3 class="product-name">{{ block.settings.small_title }}</h3>
          </a>
          <p class="product-price">
            <strong>{{ product.price | money }}</strong>
          </p>
          <hr class="divider">
          <h4 class="small_title">{{ product.title }}</h4>
          <h5 class="subtitle">{{ block.settings.subtitle }}</h5>
          <p class="includes">Includes:</p>
          <ul class="includes-points">
            {%- for i in (1..5) -%}
              {%- capture point_key -%}point_{{ i }}{%- endcapture -%}
              {%- assign point = block.settings[point_key] -%}
              {%- if point != blank -%}
                <li>
                  {%- if i == 1 -%}
                    {{ point }}
                    <!-- No tick for the first point -->
                  {%- else -%}
                    <span class="tick-mark">✓</span> {{ point }}
                    <!-- Black thin tick for other points -->
                  {%- endif -%}
                </li>
              {%- endif -%}
            {%- endfor -%}
          </ul>
          <form method="post" action="/cart/add" class="ajax-add-to-cart">
            <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
            <button
              class="addtocart"
              type="submit"
              style="
                font-family: Open Sans, sans-serif;
                font-weight: 700;background-color: #6C86FE; border-radius: 30px; color: #FFFEF9; padding: 6px 30px; border: none; margin:1rem;
              "
            >
              Add to Cart
            </button>
          </form>
        </div>
      {%- endfor -%}
    </div>
  </div>
</div>

<style>
    .slick-prev, .slick-next {
    background-color: #6C86FE; /* Customize the arrows */
    color: #FFFEF9;
    border-radius: 50%;
    width: 30px;
    height: 30px;
  }

  .slick-prev:before, .slick-next:before {
    color: #FFFEF9; /* Customize the arrow icon color */
  }

  .slick-dots li button:before {
    color: #6C86FE; /* Customize the dots color */
  }

  .slick-track {
    display: flex;
  }

    .custom-products-wrapper{
      background: linear-gradient(180deg, rgba(255, 254, 249, 0.15) 0%, rgba(108, 134, 254, 0.15) 100%); width: 99.4vw; margin-left: calc(-50vw + 50%);
    }
            .custom-subheading{
              color:#0A1F44D9;
            text-align:left;
            margin: 5px 0 20px 0;
          font-family: 'Outfit', sans-serif;
    font-weight: 500;
            }

              .custom-card-heading{
                margin: 5px auto;
                font-weight: 600;
                font-family: 'Outfit', sans-serif;
                color:#0A1F44;
                text-align: center;
                max-width: 600px;
              }

            .small_title {
              color:#0A1F44;
            //styleName: Hl2 24pt;
            font-family: 'Outfit', sans-serif;
            font-weight: 550;
            line-height: 25px;
            text-align: left;
              font-size:18px;
              height:50px;

            }
              .subtitle{
                color:#0A1F44;
                //styleName: Body Small 14pt;
            font-family: "Open Sans", sans-serif;
            font-size: 14px;
            font-weight: 400;
            line-height: 21px;
            text-align: left;
            margin-top:-2rem;
              }

              .includes{
                color:#0A1F44;
                font-family:"Open Sans", sans-serif;
      font-size: 14px;
      font-weight: 400;
      line-height: 24px;
      text-align: left;

              }

            .custom-products {
              display: flex;
              flex-direction: column;
              align-items: center; /* Center items horizontally */
              text-align: center;
              background: linear-gradient(180deg, rgba(255, 254, 249, 0.15) 0%, rgba(108, 134, 254, 0.15) 100%); /* Gradient background */
              padding: 60px; /* Optional: add padding */
              border-radius: 10px; /* Optional: add rounded corners */
            }

            .stars {
              font-size: 30px; /* Custom font size for stars */
              margin-bottom: 5px; /* Reduced space below stars */
            }

            .grid {
              display: flex;
              justify-content: center;
              flex-wrap: wrap;
            }

            .product-card {
              background-color: #FFFEF9; /* Solid background color for cards */
              border: 1px solid #6C86FE;
              border-radius: 5px;
              padding: 20px;
              text-align: center;
              width: 240px;
            }

            .product-image {
              display: block;
              margin: 0 auto 10px; /* Center the image */
              max-width: 100%; /* Ensure the image fits within the card */
              height: auto; /* Maintain the image aspect ratio */
            }

            .product-name {
              font-size: 16px; /* Set product name font size */
              margin: 2px 0; /* Adjust margin */
              text-align:left;
              font-family: "Open Sans", sans-serif;
              color:#0A1F44;
          font-optical-sizing: auto;
          font-weight: 700;  /* Use 700 for bold */
          font-style: normal;
          text-transform: uppercase;
        line-height: 29.73px;
        letter-spacing: 0.2em;
    height:35px;

            }

            .product-price {
              font-size: 34px; /* Set product price font size */
              margin: 2px 0; /* Reduce gap above and below the line */
              text-align:left;
            font-family: 'Outfit', sans-serif;
              color:#0A1F44;
           font-weight: 600;
           line-height: 48px;
           text-align: left;


            }

            .divider {
              border-top: 1px solid #6C86FE;
              margin: 2px 0; /* Reduce gap above and below the line */
            }

            .includes-points {
              list-style-type: none; /* Remove default list style */
              padding: 0;
              margin-top:-1rem;
                align-items: left; /* Align tick mark and text */
              //styleName: Body 16pt;
            font-family: "Open Sans", sans-serif;
            font-size: 13px;
            font-weight: 400;
            line-height: 24px;
            text-align: left;
            height:100px;
            }

            .includes-points li {
              display: flex;
              align-items: left; /* Align tick mark and text */
              //styleName: Body 16pt;
            font-family: "Open Sans", sans-serif;
              color:#0A1F44;
            font-size: 13px;
            font-weight: 400;
            line-height: 24px;
            text-align: left;

            }

            .tick-mark {
              color: black;
              font-size: 16px; /* Adjust the size if needed */
              font-weight: normal; /* Ensure the tick is thin */
              margin-right: 5px; /* Add some spacing between tick and text */
            }
</style>

<script>
  document.querySelectorAll('.ajax-add-to-cart').forEach(form => {
    form.addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent default form submission
      const formData = new FormData(form);

      fetch('/cart/add.js', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        console.log('Product added:', data);
        alert('Product added to cart!'); // Notify the user
      })
      .catch((error) => {
        console.error('Error:', error);
      });
    });
  });
</script>
