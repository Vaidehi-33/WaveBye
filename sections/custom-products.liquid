{% schema %}
{
  "name": "Custom Products Section",
  "settings": [
    {
      "type": "range",
      "id": "number_of_products",
      "label": "Number of Product Cards",
      "min": 1,
      "max": 10,
      "default": 3
    }
  ],
  "blocks": [
    {
      "type": "product_card",
      "name": "Product Card",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        },
        {
          "type": "text",
          "id": "small_title",
          "label": "Small Title"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle"
        },
        {
          "type": "textarea",
          "id": "includes_points",
          "label": "Includes Points (one point per line)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Products",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="custom-products">
  <div class="grid">
    {%- for block in section.blocks -%}
      {%- assign product = block.settings.product -%}
      <div class="product-card">
        <form method="post" action="/cart/add">
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          <img src="{{ product.featured_image | img_url: '240x240' }}" alt="{{ product.title }}" class="product-image">
          <h3 class="product-name">{{ product.title }}</h3>
          <p class="product-price">{{ product.price | money }}</p>
          <hr class="divider">
          <h4>{{ block.settings.small_title }}</h4>
          <h5>{{ block.settings.subtitle }}</h5>
          <p>Includes:</p>
          <ul class="includes-points">
            {%- assign points = block.settings.includes_points | split: '\n' -%}
            {%- for point in points -%}
              <li><span class="tick-mark">✔️</span> {{ point }}</li>
            {%- endfor -%}
          </ul>
          <button type="submit" style="background-color: #6C86FE; border-radius: 30px; color: #FFFEF9; padding: 10px 20px; border: none;">
            Add to Cart
          </button>
        </form>
      </div>
    {%- endfor -%}
  </div>
</div>

<style>
.custom-products {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 20px;
}

.grid {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
}

.product-card {
  border: 1px solid #6C86FE;
  border-radius: 10px;
  padding: 20px;
  text-align: center;
  width: 240px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.product-image {
  display: block;
  margin: 0 auto 10px; /* Center the image */
  max-width: 100%; /* Ensure the image fits within the card */
  height: auto; /* Maintain the image aspect ratio */
}

.product-name {
  font-size: 18px; /* Set product name font size */
  margin: 10px 0; /* Adjust margin */
}

.product-price {
  font-size: 48px; /* Set product price font size */
  margin: 5px 0; /* Reduce gap above and below the line */
}

.divider {
  border-top: 1px solid #6C86FE; 
  margin: 5px 0; /* Reduce gap above and below the line */
}

.includes-points {
  list-style-type: none; /* Remove default list style */
  padding: 0;
  margin: 10px 0;
}

.includes-points li {
  display: flex;
  align-items: center; /* Align tick mark and text */
}

.tick-mark {
  margin-right: 5px; /* Space between tick mark and text */
  color: #6C86FE; /* Optional: color for tick mark */
}
</style>