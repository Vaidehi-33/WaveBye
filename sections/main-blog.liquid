<!-- Start of Tag-based Filter -->
<div class="blog-filter section-{{ section.id }}-padding">
  <ul>
    <li><a href="/blogs/{{ blog.handle }}">All Posts</a></li>
    <li><a href="/blogs/{{ blog.handle }}/tagged/Category-1">Category 1</a></li>
    <li><a href="/blogs/{{ blog.handle }}/tagged/Category-2">Category 2</a></li>
    <li><a href="/blogs/{{ blog.handle }}/tagged/Category-3">Category 3</a></li>
  </ul>
</div>
<!-- End of Tag-based Filter -->

<!-- Start of Search Box -->
<div class="blog-search">
  <input type="text" id="blogSearchInput" placeholder="Search blogs..." aria-label="Search blogs" onkeyup="filterBlogs()">
</div>
<!-- End of Search Box -->

{%- paginate blog.articles by 6 -%}
  <div class="main-blog page-width section-{{ section.id }}-padding">
    <h1 class="title--primary{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}">
      {{ blog.title | escape }}
    </h1>

    <div class="blog-articles {% if section.settings.layout == 'collage' %}blog-articles--collage{% endif %}" id="blogArticles">
      {%- for article in blog.articles -%}
        <div
          class="blog-articles__article article{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
          data-title="{{ article.title | escape }}"
          data-tags="{{ article.tags | join: ',' | escape }}"
          {% if settings.animations_reveal_on_scroll %}
            data-cascade
            style="--animation-order: {{ forloop.index }};"
          {% endif %}
        >
          {%- render 'article-card',
            article: article,
            media_height: section.settings.image_height,
            media_aspect_ratio: article.image.aspect_ratio,
            show_image: section.settings.show_image,
            show_date: section.settings.show_date,
            show_author: section.settings.show_author,
            show_excerpt: true
          -%}

          <!-- "Read More" Link inside the blog card -->
          <div class="read-more-container">
            <a href="{{ article.url }}" class="read-more-link">Read More &rarr;</a>
          </div>
        </div>
      {%- endfor -%}
    </div>

    {%- if paginate.pages > 1 -%}
      {%- render 'pagination', paginate: paginate -%}
    {%- endif -%}
  </div>
{%- endpaginate -%}

<script>
  function filterBlogs() {
    const input = document.getElementById('blogSearchInput');
    const filter = input.value.toLowerCase();
    const articles = document.querySelectorAll('.blog-articles__article');

    articles.forEach(article => {
      const title = article.getAttribute('data-title').toLowerCase();
      const tags = article.getAttribute('data-tags').toLowerCase();
      
      // Check if the input matches the title or any of the tags
      if (title.includes(filter) || tags.includes(filter)) {
        article.style.display = ''; // Show the article
      } else {
        article.style.display = 'none'; // Hide the article
      }
    });
  }
</script>

<style>
  .blog-search {
    margin-bottom: 20px; /* Adds space below the search input */
  }

  .blog-search input {
    width: 100%; /* Full-width input */
    padding: 10px; /* Padding for input */
    border: 1px solid #ccc; /* Border for input */
    border-radius: 4px; /* Rounded corners */
  }

  .blog-filter ul {
    list-style-type: none; /* Remove bullet points */
    padding: 0; /* Remove padding */
  }

  .blog-filter li {
    display: inline; /* Inline list items */
    margin-right: 15px; /* Space between filter items */
  }

  .read-more-link {
    display: inline-block; /* Makes the link a block for easier clicking */
    margin-top: 10px; /* Space above the link */
    color: #007bff; /* Link color */
    text-decoration: none; /* Remove underline */
  }

  .read-more-link:hover {
    text-decoration: underline; /* Underline on hover */
  }
</style>